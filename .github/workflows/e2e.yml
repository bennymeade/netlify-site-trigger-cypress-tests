# .github/workflows/e2e.yml
# test the deployed Netlify site
name: e2e
on:
  workflow_dispatch:
    inputs:
      siteName:
        description: Netlify Site Name
        required: false
      deployPrimeUrl:
        description: Deployed URL
        required: true
      commit:
        description: Original repo commit SHA
        required: false
jobs:
  show-event:
    runs-on: ubuntu-20.04
    steps:
      - name: Echo inputs
        run: echo "Testing url ${{ github.event.inputs.deployPrimeUrl }}"

      - name: Cypress run
        uses: cypress-io/github-action@v2
        with:
          install: false
          browser: chrome
          headless: true
          command: npx cypress run --record --key ${{ secrets.CYPRESS_RECORD_KEY }}
